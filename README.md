# java-model-generator

---

Generate entity model classes for Java projects based on database schema

---

## Getting started

`git clone https://github.com/david-luison-starkey/java-model-generator.git` 

`pip install -r requirements.txt`

`python java_model_generator.py --help` for help text (auto-generated by `argparse`)

---

## Usage & limitations

The script assumes that the database in question has a `dbo.INFORMATION_SCHEMA`.

Two queries are hardcoded into the script at present.

The ordering of COLUMN_NAME and DATA_TYPE matter for the script to function correctly.

```python
TABLES_QUERY = 'SELECT t.TABLE_NAME FROM INFORMATION_SCHEMA.TABLES AS t'
COLUMNS_QUERY = f'SELECT c.COLUMN_NAME, c.DATA_TYPE FROM INFORMATION_SCHEMA.COLUMNS AS c WHERE c.TABLE_NAME = \'{{}}\''
```

The script also makes some assumptions about the desired format for the generated `Java` model classes, primary amongst 
them being that `Lombok` will be used (`@Data`, `@AllArgsConstructor`, and `@NoArgsConstructor`).

The script will generate import statements based on the data types used for fields. Mapping was informed by: 
https://www.tutorialspoint.com/hibernate/hibernate_mapping_types.html and Microsoft documentation (since this project 
was tested against MSSQL), e.g. 
https://learn.microsoft.com/en-us/sql/t-sql/data-types/binary-and-varbinary-transact-sql?view=sql-server-ver16

`java.lang.Character` type has been omitted in favour of `java.lang.String` for flexibility. `*_id` columns in the 
database this project was developed against have the `DATA_TYPE` `char` with a `CHARACTER_MAXIMUM_LENGTH` of 36; 
this could be a potential enhancement.

The script assumes that the first column in each table is the primary key (and annotates this field with `@Id`).

---

## Example

If no `--output` argument is provided, the script defaults to generating `class` files in a `models/` directory in the 
script's base directory. `models/` is created if it does not already exist.

Example generated file for dbo.car:

```Java
package org.models;

import jakarta.persistence.Entity;
import java.io.Serializable;
import jakarta.persistence.Column;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Entity
public class Car implements Serializable {

    private static final long serialVersionUID = 1L;
    
    @Id
    @Column(name = "car_id") 
    private String carId;
    
    @Column(name = "colour")
    private String colour;
    
    @Column(name = "make")
    private String make;
    
    @Column(name = "manufacture_year")
    private Integer manufactureYear;
   
    @Column(name = "when_changed") 
    private String whenChanged;
    
    @Column(name = "who_changed") 
    private String whoChanged;
   
    @Column(name = "when_created") 
    private Date whenCreated;
    
    @Column(name = "who_created")
    private String whoCreated;

}
```
